<!doctype html>
<html lang="en">
    <head>
        <title>{{ hostname.capitalize() }} live monitoring</title>
        <meta charset="utf-8">
        <link rel="stylesheet" href="{{ url_for('v1.static', filename='design.css') }}"/>
        <link rel="stylesheet" href="{{ url_for('v1.static', filename='select2/select2.css') }}"/>
        <link rel="icon" type="image/png" href="{{ url_for('v1.static', filename='favicon.png') }}" />
        <script src="{{ url_for('v1.static', filename='jquery-1.9.1.min.js') }}"></script>
        <script src="{{ url_for('v1.static', filename='jquery.cookie-1.4.0.min.js') }}"></script>
        <script src="{{ url_for('v1.static', filename='jquery.numeric-1.3.1.min.js') }}"></script>
        <script src="{{ url_for('v1.static', filename='select2/select2.min.js') }}"></script>
        <script type="text/javascript" src="{{ url_for('v1.static', filename='g5k-functions.js') }}"></script>
    </head>
    <body>
        <div id="header"><h1>{{ hostname.capitalize() }} monitoring</h1></div>
        <!-- Horizontal menu bar -->
        <div id="cssmenu">
            <ul>
                {% if metric == 'energy' %}
                <li class="active has-sub"><a class="activable" href="#"><span>Energy</span></a>
                {% else %}
                <li class="has-sub"><a class="activable" href="#"><span>Energy</span></a>
                {% endif %}
                <ul>
                {% for label in scales %}
                    {% if metric == 'energy' and label == scale %}
                        <li class="active"><a class="active activable" href="{{ url_for('v1.welcome_scale', metric='energy', scale=label) }}"><span>{{ label }}</span></a></li>
                        {% set metric = 'energy' %}
                    {% else %}
                        <li><a href="{{ url_for('v1.welcome_scale', metric='energy', scale=label) }}"><span>{{ label }}</span></a></li>
                    {% endif %}
                {% endfor %}
                </ul>
                </li>
                {% if metric == 'network' %}
                <li class="active has-sub"><a class="activable" href="#"><span>Network</span></a>
                {% else %}
                <li class="has-sub"><a class="activable" href="#"><span>Network</span></a>
                {% endif %}
                <ul>
                {% for label in scales %}
                    {% if metric == 'network' and label == scale %}
                        <li class="active"><a class="active activable" href="{{ url_for('v1.welcome_scale', metric='network', scale=label) }}"><span>{{ label }}</span></a></li>
                        {% set metric = 'network' %}
                    {% else %}
                        <li><a href="{{ url_for('v1.welcome_scale', metric='network', scale=label) }}"><span>{{ label }}</span></a></li>
                    {% endif %}
                {% endfor %}
                </ul>
                </li>
            </ul>
        </div>
        <div id="inner">
            <!-- Period view (all probes for one period) -->
            {% if view == 'scale' %}
                {% if probes|count > 0 %}
                    <h2>Summary</h2>
                    <!-- Display summary graph -->
                    <img class="graph" id="summary" src="{{ url_for('v1.send_summary_graph', metric=metric, start=start, end=end) }}" alt="Summary graph"/>
                    <h2>Details</h2>
                    <!-- Display all probe graphs -->
                    <select multiple>
                    {% for probe in probes %}
                        <option value="{{ probe }}">{{ probe }}</option>
                    {% endfor %}
                    </select>
                    <input type="text" id="job-field"/><button type="button" id="job-button">Job</button>
                    <button type="button" id="select-all">All</button>
                    <button type="button" id="deselect-all">Clear</button>
                    <a style="float:right; margin-top:10px" id="zip" href="{{ url_for('v1.send_zip') }}">Download all probes RRD</a>
                    <div id="probes"></div>
                    <div id="probes-not-found" style="display:none">Probes not found:
                        <ul id="not-found"></ul>
                    </div>
                {% else %}
                    <p>No probes found.</p>
                {% endif %}

            <!-- Probe view (all scales for one probe) -->
            {% elif view == 'probe' %}
                <h2>{{ probe }} <a style="float:right" href="{{ url_for('v1.send_zip') }}?probes={{ probe }}">Download RRD</a></h2>
                {% for scale in scales %}
                    <img class="graph" src="{{ url_for('v1.send_probe_graph', metric=metric, probe=probe, start=scales[scale]['start'], end=scales[scale]['end'])}}" alt="Graph {{ probe }}"/>
                {% endfor %}
            {% endif %}
        </div>
        <div id="loading-div-background">
            <div id="loading-div">
                <h2>Please wait...</h2>
            </div>
        </div>
    </body>
</html>
